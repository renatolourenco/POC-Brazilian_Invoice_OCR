# POC-Brazilian_Invoice_OCR
POC Developed with Python, OpenCV, Google Tesseract and Docker to obtain data from invoices issued in BR – São Paulo and Rio de Janeiro.

## installation

First, clone the repository using the following git command:

```bash
git clone git@github.com:renatolourenco/POC-Brazilian_Invoice_OCR.git
```

This project has a single dependency if you have docker installed on the HOST where it will be used, all other dependencies are already installed during the creation of the Docker Image.
To do so, you must access the project folder and then run the following commands

```bash
$ cd poc_nfe_ocr
$ docker build -t img_poc_nfe_ocr .
```

After the creation of the image is finished, it will be necessary to obtain the ID given to the new image and finally put the container to run, for this use the following commands:

```bash
docker image ls
```

A frame will be displayed as an example, the IMAGE ID that matters to us is that of the REPOSITORY "poc_nfe_ocr" for example:

```bash
REPOSITORY                    TAG       IMAGE ID       CREATED         SIZE
poc_nfe_ocr                   latest    8570d3a38d06   11 hours ago    808MB
docker                        latest    b6448e722e51   4 weeks ago     216MB
```

The next command is to start the container, which is as follows:


```bash
docker run -v /Users/renatolourenco/Documents/Bravo/poc_nfe_ocr/input:/app/input -it --rm --name poc_nfe_ocr 8570d3a38d06
```

In this command, it will be necessary to change the absolute path of the folder on the host that will be mapped to the container, which will receive the PDFs that will be processed.
The absolute path that must be changed is the one that comes after the -v flag, in the case of my machine it is "/Users/renatolourenco/Documents/Bravo/POC-Brazilian_Invoice_OCR/input", I recommend using the PWD termnal command to obtain the correct path .
Another field to be changed is the ID of the IMAGE, it is this sequence of characters after the name of the container, it is obtained in the result of the command "docker image ls" as instructed above.

Finally after executing these steps the container is working and ready to process PDF files.

## User manual

**Operation**
After the container starts working, the following information will be printed on the terminal, which will be repeated every 30 seconds:

```bash
Cicle started - 09/11/2021 12:32:05
```

This indicates that the algorithm is waiting watching the INPUT folder searching for new PDF files to process them.


**Files**
The algorithm expects as input PDF files of NFe's generated by the municipalities of São Paulo and Rio de Janeiro, files that do not have the .pdf extension are ignored as well as NFe from other municipalities may not extract the data as expected.

For correct functioning, it is ideal that the NFe of São Paulo, the name of the PDF start with SP_ and the equivalent for Rio de Janeiro would be RJ_.
It is also important that there are no blank spaces in the file name, which can be replaced by _ or - which work very well in processing.